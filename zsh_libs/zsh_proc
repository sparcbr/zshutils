VERSION=1.0.1

# Process handling. Stuff like pid, kill, lsof, etc...

function cwdof()
{
	for p in $(pidof $1); do
		ls -ld /proc/$p/cwd 2>/dev/null
	done | awk -F'-> ' '{print $2}' | uniq
}

function waitOnPids()
{
	local pids=($@)
	local integer i err=0
	while [[ $#pids -gt 0 ]]; do
		sleep 0.4
		for ((i=1 ; i <= $#pids; )) do
			if kill -0 $pids[$i] 2>/dev/null; then
				((i++))
			else
				wait $pids[$i] || ((err++))
				pids[$i]=()
			fi
		done
	done
	return $err
}
